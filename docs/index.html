<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="MSc Global Change Geography" />


<title>Earth Observation</title>
<!-- Material Design fonts -->
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<script src="index_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="index_files/bootstrap-3.3.6/css/bootstrap.min.css" rel="stylesheet" />
<script src="index_files/bootstrap-3.3.6/js/bootstrap.min.js"></script>
<script src="index_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<script src="index_files/navigation-1.1/tabsets.js"></script>
<script src="index_files/navigation-1.1/codefolding.js"></script>
<link href="index_files/magnific-popup-1.1.0/magnific-popup.css" rel="stylesheet" />
<script src="index_files/magnific-popup-1.1.0/jquery.magnific-popup.min.js"></script>
<link href="index_files/bootstrap_material-0.1/bootstrap-material-design.min.css" rel="stylesheet" />
<link href="index_files/bootstrap_material-0.1/ripples.min.css" rel="stylesheet" />
<script src="index_files/bootstrap_material-0.1/material.min.js"></script>
<script src="index_files/bootstrap_material-0.1/ripples.min.js"></script>
<link href="index_files/material-0.1/material.css" rel="stylesheet" />
<script src="index_files/material-0.1/material.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #ffffff; color: #1f1c1b; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; background-color: #ffffff; color: #a0a0a0; border-right: 1px solid #a0a0a0; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #1f1c1b; background-color: #ffffff; }
code > span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code > span.dt { color: #0057ae; } /* DataType */
code > span.dv { color: #b08000; } /* DecVal */
code > span.bn { color: #b08000; } /* BaseN */
code > span.fl { color: #b08000; } /* Float */
code > span.cn { color: #aa5500; } /* Constant */
code > span.ch { color: #924c9d; } /* Char */
code > span.sc { color: #3daee9; } /* SpecialChar */
code > span.st { color: #bf0303; } /* String */
code > span.vs { color: #bf0303; } /* VerbatimString */
code > span.ss { color: #ff5500; } /* SpecialString */
code > span.im { color: #ff5500; } /* Import */
code > span.co { color: #898887; } /* Comment */
code > span.do { color: #607880; } /* Documentation */
code > span.an { color: #ca60ca; } /* Annotation */
code > span.cv { color: #0095ff; } /* CommentVar */
code > span.ot { color: #006e28; } /* Other */
code > span.fu { color: #644a9b; } /* Function */
code > span.va { color: #0057ae; } /* Variable */
code > span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code > span.op { color: #1f1c1b; } /* Operator */
code > span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code > span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code > span.pp { color: #006e28; } /* Preprocessor */
code > span.at { color: #0057ae; } /* Attribute */
code > span.re { color: #0057ae; } /* RegionMarker */
code > span.in { color: #b08000; } /* Information */
code > span.wa { color: #bf0303; } /* Warning */
code > span.al { color: #bf0303; font-weight: bold; } /* Alert */
code > span.er { color: #bf0303; text-decoration: underline; } /* Error */
code > span. { color: #1f1c1b; } /* Normal */
</style>

<link rel="stylesheet" href="material_adjust.css" type="text/css" />

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->

</head>

<body>

<div class="header-panel shadow z-2">
    <div class="container-fluid">
        <div class="row">
            <div class="col-xs-3">
        <div id="header">
    <h1 class="title">Earth Observation</h1>
                <h4 class="author">MSc Global Change Geography</h4>
                <h4 class="date">Summer 2019</h4>
        </div>
    </div>
</div>
</div>
</div>


<div class="container-fluid main-container">
    <div class="row">
      <nav class="col-xs-3 menu">
        <div id="toc">
        <ul>
        <li><a href="#hello">Hello!</a></li>
        <li><a href="#introducing-r">Introducing R</a></li>
        <li><a href="#session-01-handling-raster-data-in-r">Session 01: Handling raster data in R</a></li>
        <li><a href="#session-02-from-digital-numbers-to-surface-reflectance">Session 02: From digital numbers to surface reflectance</a></li>
        <li><a href="#session-02-data-quality-cloud-masking">Session 02: Data quality &amp; cloud masking</a></li>
        <li><a href="#session-03-vegetation-indices-and-data-transforms">Session 03: Vegetation indices and data transforms</a></li>
        <li><a href="#session-04-pixel-based-compositing">Session 04: Pixel-based compositing</a></li>
        <li><a href="#session-05-machine-learning-for-image-classification">Session 05: Machine learning for image classification</a></li>
        <li><a href="#session-06-accuracy-assessment-and-area-estimation">Session 06: Accuracy assessment and area estimation</a></li>
        <li><a href="#session-07-multi-temporal-change-detection">Session 07: Multi-temporal change detection</a></li>
        <li><a href="#session-08-spectral-temporal-metrics">Session 08: Spectral-temporal metrics</a></li>
        <li><a href="#project-work">Project work</a></li>
        <li><a href="#terminology">Terminology</a></li>
        </ul>
        </div>
        
        
        
      </nav>
     <div class="pages col-xs-9">
     <div class="row">
       <div class="col-xs-10">



<div id="hello" class="section level1">
<h1>Hello!</h1>
<div class="figure">
<img src="fig/header.png" />

</div>
<div id="about-earth-observation" class="section level2">
<h2>About Earth Observation</h2>
<p>Earth Observation is an advanced course for students of the Master of Science <a href="https://www.geographie.hu-berlin.de/en/studies/study-programs/master-degree-programs/master-of-science">“Global Change Geography”</a> of Humboldt-Universität zu Berlin, other interested parties are cordially invited to join. In this course, we cover multiple aspects of optical remote sensing by working with multi-sprectral Landsat and Sentinel 2 imagery. The course is fully based on open source software, including R and QGIS.</p>
<p>As you followed the curriculum of the MSc program, you most likely joined the module “Quantitative Methods for Geographers”, in which you learned using R for statistical problems. Here, we built on your existing knowledge. If you are not enrolled in the MSc program, feel free to look at the <a href="https://github.com/corneliussenf/quantitative_methods">course materials</a>.</p>
<p>Alternatively, you may want to follow one of the numerous tutorials for R fundamentals (e.g., <a href="https://www.rstudio.com/online-learning/">RStudio</a>, <a href="https://www.datacamp.com/courses/free-introduction-to-r">DataCamp</a>, <a href="http://www.r-tutorial.nl/">UMC Utrecht</a>, <a href="http://adv-r.had.co.nz/">Advanced R by Hadley Wickham</a>), or those specifically for geodata processing (e.g., <a href="https://geoscripting-wur.github.io/">Wageningen University</a>, <a href="https://www.earthdatascience.org/">University of Colorado</a>).</p>
<hr />
</div>
<div id="learning-goals-course-contents" class="section level2">
<h2>Learning goals &amp; course contents</h2>
<p>The main goal of this course is to provide you with the necessary knowledge and tools for using optical remote sensing datasets and methods in the geo-scientific context. We want you to enhance your ability of problem-solving, empowering you to perform research independently. To that end, we cover aspects of data acquisition, spatial data handling in R and QGIS, basics of image pre-processing, higher-level processing such as pixel-based compositing and time-series binning. The course contents are related to our lab´s research foci, both in terms of methods and study regions. You may want to check out our <a href="https://www.geographie.hu-berlin.de/en/professorships/geomatics/publications-en">publications</a>, <a href="https://www.geographie.hu-berlin.de/en/professorships/geomatics/projects">current projects</a>, or have a look at <a href="https://www2.hu-berlin.de/geomultisens/europeanLandCover/euroLandCover.html">this example</a>.</p>
<p>In the course you will learn about current state-of-the-art methods in image processing and time series analyses of optical satellite imagery. The course covers methods related to data quality, cloud masking, vegetation indices, multi-temporal image analyses, machine learning classification algorithms, area adjusted accuracy assessment, time series analyses, and image compositing. We use these methods for mapping of forest types, forest cover changes, agricultural dynamics in the Carpathian ecoregion (Poland), the Southern Brazilian Amazon, and Crete in Greece.</p>
<hr />
</div>
<div id="course-materials" class="section level2">
<h2>Course materials</h2>
<div id="readings" class="section level3">
<h3>Readings</h3>
<p>The first sessions of the course contain reading materials, such as are peer-reviewed papers and technical reports. You will find the reading materials for the next session at the end of each session. We highlight aspects to focus upon to streamline the reading process and facilitate the discussion. We are looking forward to lively discussions of the reading materials and critical questions from your end.</p>
</div>
<div id="data" class="section level3">
<h3>Data</h3>
<p>All data used in the course is openly accessible. Mostly, we´ll be working with Landsat images, which you can access through the USGS Earth Explorer. We provide download links to the datasets for each session. It will be helpful if you organize your data in a course directory on your local machine (MSc students might want to use drive <code>O:/Student_Data/your_name/EO/</code>). We will refer to this folder as <code>course.dir</code> throughout this course. Create subdirectories for each session, e.g. <code>course.dir/S01/</code> and separate data, code and course materials in additional sub-directories (e.g. <code>/data</code>, <code>/code</code>, <code>/docs</code>).</p>
</div>
<div id="exercises" class="section level3">
<h3>Exercises</h3>
<p>The weekly exercises are defined in the respective session. Each session comprises several tasks that involve scipting in R. Course participants must submit completed exercises, documented as R scripts, in <a href="http://moodle.hu-berlin.de/">moodle</a> to pass. Weekly submission deadlines are every sunday, 23:59. Please structure your script for every exercise as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">#############################################################################
<span class="co"># MSc Earth Observation Exercise [Session number]</span>
<span class="co"># [Your Name]</span>
#############################################################################

<span class="co"># Load packages, use install.packages(&#39;packagename&#39;) to install if needed</span>
<span class="kw">library</span>(raster)

<span class="co"># Change raster options to store large rasters in temp files on disk</span>
<span class="kw">rasterOptions</span>(<span class="dt">maxmemory =</span> <span class="fl">1e6</span>)

<span class="co"># Define the folder that contains your data...</span>
data.dir &lt;-<span class="st"> &#39;course.dir/S01/data/&#39;</span>

#############################################################################
<span class="co"># 1)    </span>
#############################################################################

<span class="co"># Comments for task 1</span>


#############################################################################
<span class="co"># 2)    </span>
#############################################################################

<span class="co"># ...</span></code></pre></div>
<!-- ################################## INTRO R ############################################## -->
</div>
</div>
</div>
<div id="introducing-r" class="section level1">
<h1>Introducing R</h1>
<div id="why-do-we-use-r" class="section level2">
<h2>Why do we use R?</h2>
<p>R is a programming language and open source software environment for statistical computing and graphics. The R language is widely used among statisticians and data miners for developing statistical software and data analysis. It was developed by Ross Ihaka and Robert Gentleman at the University of Auckland, New Zealand. The name R originates the first names of the two authors and refers to the programming language S. The project was conceived in 1992, with an initial version released in 1995 and a stable beta version in 2000.</p>
<p>Learning R has tons of advantages. It is a great starting point for those eager to learn programming. R offers increasingly specialized tools for data wrangling, statistical analyses, and visualization. The CRAN package repository currently features &gt;13,000 packages serving a variety of purposes, e.g. data manipulation (<code>tidyr</code>, <code>dplyr</code>, <code>caret</code>), visualization (<code>ggplot2</code>, <code>ggmap</code>, <code>rasterVis</code>), and geodata handling (<code>raster</code>, <code>rgdal</code>, <code>sp</code>, <code>sf</code>). You will notice that a huge share of figures in scientific publications was produced using R. The R community is huge, and offers great support. R is extremely popular in science &amp; industry, so a proficiency in R opens a wide array of job opportunities. Everything is free and open source.</p>
<div class="figure">
<img src="fig/fig00.png" alt="A rising tide for R (Tipman 2015; doi: 10.1038/517109a)" />
<p class="caption">A rising tide for R (Tipman 2015; doi: 10.1038/517109a)</p>
</div>
<hr />
</div>
<div id="coding-style" class="section level2">
<h2>Coding style</h2>
<p>A few basic rules apply to coding in R. Here is a short summary of <a href="https://google.github.io/styleguide/Rguide.xml">Google´s style guide</a>:</p>
<ul>
<li>Regularly save your progress.</li>
<li><p>Script names should be meaningful and end in ‘.R’.</p></li>
<li>Comment (#) your code &amp; separate it into readable chunks.</li>
<li><p>Try to limit your code to 80 characters per line.</p></li>
<li>Variable and function names should be lowercase.</li>
<li>Variable names should be nouns and function names verbs.</li>
<li><p>Use underscores to separate words within a name.</p></li>
<li>Place spaces around operators (=, +, -, &lt;-, etc.) and after commas.</li>
<li><p>Use &lt;-, not =, for assignment.</p></li>
</ul>
<p>An example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">######################################################
<span class="co"># Creating random data and a correlated response </span>
<span class="co"># Philippe Rufin, 2019</span>

<span class="co"># Load all required packages</span>
<span class="kw">library</span>(ggplot2)

<span class="co"># Create random data</span>
x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">50</span>, <span class="dv">0</span>, <span class="dv">2</span>)

<span class="co"># Build function to simulate response</span>
create.response &lt;-<span class="st"> </span><span class="cf">function</span>(x){x <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">50</span>, <span class="dv">0</span>, <span class="fl">0.2</span>)}

<span class="co"># Apply function to random data</span>
y &lt;-<span class="st"> </span><span class="kw">create.response</span>(x)

<span class="co"># Make a dataframe</span>
data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="st">&#39;x&#39;</span> =<span class="st"> </span>x, <span class="st">&#39;y&#39;</span> =<span class="st"> </span>y)

<span class="co"># Plot the simulated dataset</span>
<span class="kw">ggplot</span>(data, <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="index_files/figure-html/style-1.png" width="288" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Investigate correlation in the data</span>
<span class="kw">cor</span>(data<span class="op">$</span>x, data<span class="op">$</span>y)</code></pre></div>
<pre><code>[1] 0.971865</code></pre>
<hr />
</div>
<div id="help" class="section level2">
<h2>Help!</h2>
<p>If you get stuck, there are plenty of things you can do:</p>
<ul>
<li>Seek the function´s help page (i.e. highlight the function and hit F1)</li>
<li>Search your problem or error message</li>
<li>Ask your colleagues</li>
<li>Use the moodle forum</li>
<li>Check forums (e.g., <a href="https://stackoverflow.com/">StackOverflow</a></li>
</ul>
<!-- ################################## SESSION 01 ############################################## -->
</div>
</div>
<div id="session-01-handling-raster-data-in-r" class="section level1">
<h1>Session 01: Handling raster data in R</h1>
<div id="learning-goals" class="section level2">
<h2>Learning goals</h2>
<p>In this session, you will</p>
<ul>
<li>Download multi-spectral satellite data.</li>
<li>Read &amp; write raster data.</li>
<li>Manipulate the spatial extent of rasters.</li>
<li>Extract cell values &amp; plot a spectral profile.</li>
</ul>
<hr />
</div>
<div id="the-raster-package" class="section level2">
<h2>The <code>raster</code> package</h2>
<p>It´s great, as it facilitates raster data handling. It allows us to access file characteristics before loading data into memory, facilitates handling of coordinate reference systems and spatial extents. We can use it to perform raster algebra, to combine raster and vector datasets (e.g. ESRI shapefiles), or to convert raster files into matrices, which are compatible with the base functions to access image statistics, develop models, slice data dimensions etc.</p>
<p>There are a couple of things that the raster package does not provide. Advanced visualization of spatial datasets and manual operations, such collecting training or validation data, are preferably done in a GIS environment (e.g. QGIS). Furthermore, processing large data volumes in R can be quite time-consuming (use Python instead, it´s syntax is similar to R).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Install the raster and rgdal packages</span>
<span class="kw">install.packages</span>(<span class="st">&#39;raster&#39;</span>)
<span class="kw">install.packages</span>(<span class="st">&#39;rgdal&#39;</span>)

<span class="co"># Load the package</span>
<span class="kw">library</span>(raster)</code></pre></div>
<hr />
</div>
<div id="data-acquisition" class="section level2">
<h2>Data acquisition</h2>
<p>Let´s get some Landsat data. Visit the <a href="http://earthexplorer.usgs.gov/">USGS Earth Explorer</a> and use the Adress/Place field to navigate to Wisła, Poland (lat,lon: 49.6473,18.8677). Switch to the ‘Data Sets’ tab and select Landsat -&gt; Landsat Collection 1 Level-1. Tick the ‘Landsat 8 OLI/TIRS C1 Level 1’ box and click on ‘Results &gt;&gt;’.</p>
<p>You´ll get several hundreds of results, so let´s narrow down the search. Switch to the ‘Additional Criteria’ tab. Let´s choose a scene cloud cover of ‘Less than 40%’, the ‘Tier 1’ category and narrow the date range to February 2014 until August 2014.</p>
<p>Find the following images:</p>
<ul>
<li>LC08_L1TP_189025_20140716_20170421_01_T1</li>
<li>LC08_L1TP_189025_20140310_20170425_01_T1</li>
</ul>
<p>Visualize the images in the Earth Explorer interface by clicking on the small image icon. For downloading the data, you will need an EarthExplorer account. If you prefer not to register, you can <a href="https://box.hu-berlin.de/f/5248da1584054eb6ba51/?dl=1">download the files from our repository</a>. Otherwise you may register and download the .tar.gz files. Unpack them to your session folder.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Define a path you want to store this session´s data in</span>
path &lt;-<span class="st"> &#39;course.dir/S01/data/&#39;</span>

<span class="co"># Create data directory in your working directory</span>
<span class="kw">dir.create</span>(path, <span class="dt">showWarnings =</span> <span class="ot">TRUE</span>, <span class="dt">recursive =</span> <span class="ot">TRUE</span>)

<span class="co"># Download the files for this session</span>
<span class="cf">if</span> (<span class="op">!</span><span class="kw">file.exists</span>(<span class="kw">paste0</span>(path,<span class="st">&#39;gcg_eo_s01.zip&#39;</span>))) {
                 <span class="kw">download.file</span>(<span class="st">&#39;https://box.hu-berlin.de/f/5248da1584054eb6ba51/?dl=1&#39;</span>, <span class="dt">dest =</span> <span class="kw">paste0</span>(path,<span class="st">&#39;gcg_eo_s01.zip&#39;</span>))
                 <span class="kw">unzip</span>(<span class="kw">paste0</span>(path,<span class="st">&#39;gcg_eo_s01.zip&#39;</span>), <span class="dt">exdir=</span>path)
}</code></pre></div>
<hr />
<div id="reading-data" class="section level3">
<h3>Reading data</h3>
<ol style="list-style-type: decimal">
<li><p>Today, you will make use of R´s raster package classes and functions which are well described in the package documentation. Get acquainted with the following classes and functions and find out what they are useful for: <code>raster()</code>, <code>stack()</code> ,<code>extent()</code>, <code>crop()</code>, <code>extract()</code>, <code>CRS()</code>, <code>projectRaster()</code>, <code>plotRGB()</code>, <code>writeRaster()</code></p></li>
<li><p>Visit the folder containing the unpacked Landsat image. Did you take a close look at the Landsat file naming convention? Practically, it provides some basic meta-information. For instance, <code>LC08_L1TP_189025_20140310_20170425_01_T1</code> is a sequence of information on the sensor, processing level, WRS path and row, acquisition date, processing date, collection, and collection tier, separated by ’_’.</p></li>
<li><p>As you can see, the Landsat images are delivered as single-band files. The single bands should be stacked for further analyses. For stacking, all input files must have matching extents and the identical projection. Create a stack for each of the two Landsat 8 images.</p></li>
</ol>
<div class="figure">
<img src="fig/ls_bands.jpg" alt="Band designations for Landsat satellites" style="width:70.0%" />
<p class="caption">Band designations for Landsat satellites</p>
</div>
<p>Important: Please include only the following bands: blue, green, red, near infrared, shortwave infrared 1, shortwave infrared 2 (in this order). Check the list of <a href="https://landsat.usgs.gov/what-are-band-designations-landsat-satellites/">Landsat spectral bands</a> for a recap. Always keep the band designations in mind, as this can cause confusion, e.g. when combining Landsat 5 and Landsat 8 data.</p>
<p>Try to create the two stacks with a minimum amount of code as possible! Consider using helper functions such as <code>paste0()</code>, <code>dir()</code> or <code>list.files()</code>.</p>
<hr />
</div>
<div id="manipulating-data" class="section level3">
<h3>Manipulating data</h3>
<ol start="4" style="list-style-type: decimal">
<li><p>Investigate the stack. In which projection is the data delivered?</p></li>
<li><p>Compare the extent of the two images. You will notice that they vary. Trying to stack images of different extent will cause an error message claiming:</p></li>
<li><p>To stack both images, we need to crop (or clip, or cut) the images to their common extent. Find an efficient way to identify the common extent of the images, defined as <code>common.extent &lt;- c(xmin, xmax, ymin, ymax)</code> (in projected coordinates).</p></li>
</ol>
<div class="figure">
<img src="fig/fig01.png" alt="Identifying the common extent of several images" />
<p class="caption">Identifying the common extent of several images</p>
</div>
<ol start="7" style="list-style-type: decimal">
<li>The common extent of the two images is pretty large. In order to reduce the amount of data for the next steps, we should crop the images to our region of interest, a part of the Western Beskids, defined by <code>roi.extent &lt;- c(327945, 380325, 5472105, 5521095)</code></li>
</ol>
<hr />
</div>
<div id="writing-data" class="section level3">
<h3>Writing data</h3>
<ol start="8" style="list-style-type: decimal">
<li>Write the cropped stacks from X) to your folder using <code>writeRaster()</code>. Use the <code>GTiff</code> format and the <a href="https://www.rdocumentation.org/packages/raster/versions/2.5-8/topics/dataType">appropriate datatype</a>. Why is this important?</li>
</ol>
<hr />
</div>
<div id="visualizing-data" class="section level3">
<h3>Visualizing data</h3>
<ol start="9" style="list-style-type: decimal">
<li><p>Open the cropped images (Xb) in QGIS. Seek the symbology to create a true-color (red, green, blue) and a false-color representation (e.g., RGB: swIR1, nIR, red) of each image. Be aware that the order of the spectral regions in the electromagnetic spectrum (BGR) is different in your computer screen´s (RGB).</p></li>
<li><p>Use the <code>plotRGB()</code> function in R to create another false-color visualization of the images.</p></li>
</ol>
<div class="figure">
<img src="fig/s01_falsecolor_432.png" alt="False color visualization (RGB: nIR, red, green)" />
<p class="caption">False color visualization (RGB: nIR, red, green)</p>
</div>
<hr />
</div>
<div id="extracting-spectral-profiles" class="section level3">
<h3>Extracting spectral profiles</h3>
<ol start="11" style="list-style-type: decimal">
<li>Use the <code>extract()</code> function to get spectral profiles from both images. Use the following coordinate:</li>
</ol>
<p><code>coordinate &lt;- data.frame('x' = 355623, 'y' = 5486216)</code>.</p>
<ol start="12" style="list-style-type: decimal">
<li>Visualize the results from X) in R. Can you create one plot that shows two spectral profiles (one for each image in the stack), while accounting for the band wavelength and acquisition date? Can you guess what type of surface we are looking at?</li>
</ol>
<div class="figure">
<img src="fig/s01_spectra.png" alt="Spectral profiles for two observation dates" style="width:60.0%" />
<p class="caption">Spectral profiles for two observation dates</p>
</div>
<hr />
</div>
</div>
<div id="reading-materials" class="section level2">
<h2>Reading materials</h2>
<p>In the next session, we would like to discuss the following paper:</p>
<p><a href="https://doi.org/10.1016/j.rse.2011.10.028">Zhu, Z., &amp; Woodcock, C.E. (2012). Object-based cloud and cloud shadow detection in Landsat imagery. Remote Sensing of Environment, 118, 83–94.</a></p>
<p>This is a rather technical reading, which introduces the Fmask algorithm for automated cloud and cloud shadow detection. It has been widely used for cloud detection on Landsat TM and ETM+ data, and was enhanced for the use with Landsat OLI and Sentinel 2 data (documented in <a href="https://doi.org/10.1016/j.rse.2014.12.014">Zhu et al. 2015</a>).</p>
<p>While reading try to find answers to the following questions:</p>
<ul>
<li>What is the general architecture of the algorithm?</li>
<li>How were the thresholds for spectral tests derived?</li>
<li>How will different types of error impact further analyses of the masked image?</li>
</ul>
<!-- ################################## SESSION 02 ############################################## -->
</div>
</div>
<div id="session-02-from-digital-numbers-to-surface-reflectance" class="section level1">
<h1>Session 02: From digital numbers to surface reflectance</h1>
<hr />
<div id="learning-goals-1" class="section level2">
<h2>Learning goals</h2>
<ul>
<li>Convert digital number values to top-of-atmosphere reflectance</li>
<li>Compare top-of-atmosphere reflectance to surface reflectance</li>
</ul>
<hr />
</div>
<div id="what-is-radiance-what-are-dns" class="section level2">
<h2>What is radiance / what are DNs?</h2>
<p>This session is the most technical of the entire course. Today we will be dealing with physical units, conversion, and data quality. Let´s kick it off with a short recap. Towards the end of the last exercise, you produced a plot of measurements in the different bands of a Landsat image, similar to this one:</p>
<div class="figure">
<img src="fig/s01_spectra.png" alt="Spectral profiles extracted from a Landsat Level 1 image" style="width:60.0%" />
<p class="caption">Spectral profiles extracted from a Landsat Level 1 image</p>
</div>
<p>Our y-axis label was “DN”, or digital number. Now, what is that again? Earth observing sensors, such as the ones on board the Landsat satellites register radiance at the top of the atmosphere. Radiance is expressed in watt per <a href="https://en.wikipedia.org/wiki/Steradian">steradian</a> per square meter.</p>
<p>Storing data in radiance units is difficult and therefore sensors translate measured radiance into DNs. Therefore, the range of energy measured by the sensor is broken into distinct units (DNs). Sensor-specific calibration determines the minimum and maximum amount of radiance that can be measured. DNs express the amount of radiance in relation to these sensor-specific calibration coefficients. The total number of possible DNs is what we refer to as the radiometric resolution of the sensor.</p>
<p>As an example, Landsat 4, 5, and 7 worked with a radiometric resolution of 8 bit. This allows for <code>2^8</code>, or 255 distinct DNs values. Landsat 8 works with 12 bit radiometric resolution, which is artificially quantized to 16 bit. The 16 bit resolution can represent much more different grey shades, exactly <code>2^16</code>, or 65,536 values. Let´s put this into code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(raster)

<span class="co"># Define the number of bits</span>
bit &lt;-<span class="st"> </span><span class="dv">4</span>

<span class="co"># How many grey tones can we represent given bit?</span>
<span class="kw">print</span>(<span class="kw">paste0</span>(bit, <span class="st">&#39; bits produce &#39;</span>, <span class="dv">2</span><span class="op">^</span>bit, <span class="st">&#39; grey tones.&#39;</span>))</code></pre></div>
<pre><code>[1] &quot;4 bits produce 16 grey tones.&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a raster with one line and 2^bit columns,</span>
<span class="co"># whereas cell values are filled with a vector of numbers from 1 2^bit</span>
r &lt;-<span class="st"> </span><span class="kw">raster</span>(<span class="dt">nrows =</span> <span class="dv">1</span>, <span class="dt">ncols =</span> <span class="dv">2</span><span class="op">^</span>bit, <span class="dt">vals =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span><span class="op">^</span>bit))

<span class="co"># Plot the image and assign grey-scale values to the cells</span>
<span class="kw">image</span>(r, <span class="dt">col =</span> <span class="kw">grey.colors</span>(<span class="dv">2</span><span class="op">^</span>bit, <span class="dt">start =</span> <span class="dv">0</span>, <span class="dt">end =</span> <span class="dv">1</span>), <span class="dt">main =</span> <span class="kw">paste0</span>(bit, <span class="st">&quot; bit raster&quot;</span>))</code></pre></div>
<p><img src="index_files/figure-html/greyscale-1.png" width="576" /></p>
<hr />
</div>
<div id="dns-to-toa" class="section level2">
<h2>DNs to TOA</h2>
<p>As DNs are dependent on the sensor calibration, identical measurements yield differing DNs across sensors. DNs are physically not meaningful. Instead of DNs, often we are interested in reflectance. Reflectance expresses the fraction of reflected radiance relative to the total incoming energy (sun), and is scaled between 0 and 1. Many applications require data converted to reflectance and/or corrected for the influence of the atmosphere.</p>
<ul>
<li>Sensor calibration (DN to radiance)</li>
<li>Conversion to top-of-atmosphere reflectance (radiance to TOA)</li>
<li>Atmospheric correction yielding bottom-of-atmosphere reflectance (TOA to BOA, or surface reflectance)</li>
</ul>
<p>A conversion of DNs into radiance can be easily undertaken. By accounting for sun-sensor geometries and solar irradiance, we can easily infer top-of-atmosphere reflectance (TOA) from radiance. This facilitates, e.g., a comparison of measurements from different sensors.</p>
<p>Practically, this involves a linear scaling of the DN values which uses two band-specific rescaling factors. One is multiplicative, one is additive. Formulas are explained in the <a href="https://landsat.usgs.gov/using-usgs-landsat-8-product">USGS guide for conversion to TOA Reflectance</a>. With Landsat 8 Collection 1 data, we can use a single set of coefficients to convert DNs to TOA reflectance. Note that this is not the case for all sensors.</p>
<p><span class="math inline">\(ρλ&#39; = M_ρ * Q_{cal} + A_ρ\)</span></p>
<p>where</p>
<p><span class="math inline">\(ρλ&#39;\)</span> = TOA planetary reflectance, without correction for solar angle.</p>
<p><span class="math inline">\(M_ρ\)</span> = Band-specific multiplicative rescaling factor from the metadata.</p>
<p><span class="math inline">\(Q_{cal}\)</span> = Quantized and calibrated standard product pixel values (DN).</p>
<p><span class="math inline">\(A_ρ\)</span> = Band-specific additive rescaling factor from the metadata.</p>
<p>In a next step, we can correct for solar angle during image acquisition.</p>
<p><span class="math inline">\(ρλ = ρλ&#39; / cos(θ_{SZ}) = ρλ&#39; / sin(θ_{SE})\)</span></p>
<p>where</p>
<p><span class="math inline">\(ρλ\)</span> = TOA planetary reflectance corrected for solar angle.</p>
<p><span class="math inline">\(θ_{SZ}\)</span> = Local solar zenith angle, whereas <span class="math inline">\(θ_{SZ} = 90° - θ_{SE}\)</span>.</p>
<p><span class="math inline">\(θ_{SE}\)</span> = Local sun elevation angle.</p>
<hr />
</div>
<div id="toa-to-boa" class="section level2">
<h2>TOA to BOA</h2>
<p>A final step towards comparable measurements of the Earth surface is the atmospheric correction. By doing atmospheric correction, we (theoretically) eliminate the influence of the atmosphere. We therefore call the product “surface reflectance” or “bottom of atmosphere reflectance” (BOA). Theoretically, the space-borne sensor´s measurements should be identical to ground-based measurements.</p>
<hr />
</div>
<div id="exercise" class="section level2">
<h2>Exercise</h2>
<p>During this exercise you will learn how to convert Landsat-8 Collection 1 DNs to TOA reflectance, and compare and characterize spectral appearance of different land cover types in TOA and BOA imagery. The data are provided in <a href="">our repository</a>. After unpacking, you find the following folders:</p>
<ul>
<li>DN/LC08_L1TP_189025_20141105_20170417_01_T1/ - the directory containing the “L1TP” Landsat product (i.e. terrain-corrected (“orthorectified”) data in DNs), including the metadata file (MTL.txt) and the Quality Band (BQA.tif) which contains information on radiometric saturation, clouds, cloud shadows and more.</li>
<li>SR/LC081890252014110501T1-SC20170927102137/ – the directory containing Level-2 data, i.e. atmospherically corrected, or bottom-of-atmosphere data.</li>
</ul>
<ol style="list-style-type: decimal">
<li><p>Familiarize yourself with the L1TP data. Visualize individual bands, have a look at the Level-1 metadata file (LC08_L1TP_ XXX_MTL.txt) and the information provided within. Again, we only use the six reflective bands of the OLI sensor in this exercise (3xVIS, nIR, 2xswIR)</p></li>
<li><p>Read the Landsat metadata file in R using <code>read.delim()</code> and extract the necessary information for the top-of-atmosphere conversion:</p></li>
</ol>
<p>REFLECTANCE_MULT_BAND</p>
<p>REFLECTANCE_ADD_BAND</p>
<p>SUN_ELEVATION</p>
<p>Use the pattern matching function <code>grep()</code> to find the corresponding entries in the metadata file and store them as numeric vectors. Do this as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Define the folder that contains your data...</span>
path &lt;-<span class="st"> &#39;course.dir/S02/data/DN&#39;</span>

<span class="co"># Read MTL file</span>
mtl &lt;-<span class="st"> </span><span class="kw">list.files</span>(data.path, <span class="dt">pattern=</span><span class="st">&quot;MTL.txt$&quot;</span>, <span class="dt">recursive=</span>T, <span class="dt">full.names=</span>T)
mtl.txt &lt;-<span class="st"> </span><span class="kw">read.delim</span>(mtl, <span class="dt">sep =</span> <span class="st">&#39;=&#39;</span>, <span class="dt">stringsAsFactors =</span> F)

<span class="co"># Extract numeric values</span>
REFLECTANCE_MULT_BAND &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(mtl.txt[<span class="kw">grep</span>(<span class="st">&quot;REFLECTANCE_MULT_BAND&quot;</span>,mtl.txt<span class="op">$</span>GROUP),][<span class="dv">2</span><span class="op">:</span><span class="dv">7</span>,<span class="dv">2</span>])</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Convert the DN values to TOA following the “Conversion to TOA Reflectance” section in the <a href="https://landsat.usgs.gov/using-usgs-landsat-8-product">USGS guide for conversion to TOA Reflectance</a>. Important things to keep in mind:</li>
</ol>
<ul>
<li>The Landsat data is provided as integer values. When applying the equation, the data will be cast to float. You will have to re-convert to integer at some point. Use a reflectance scaling factor of 10,000 during the conversion.</li>
<li>You can apply the conversion to all bands in a stack simultaneously.</li>
<li>The sun elevation angle provided in the metadata file is reported in degrees. The <code>sin()</code> function expects that angles are provided in radians. For the conversion to work correctly, you need to convert <code>SUN_ELEVATION</code> into radians. Make use of this helper function:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Helper-function to convert degrees to radians</span>
deg2rad &lt;-<span class="st"> </span><span class="cf">function</span>(deg){ (deg <span class="op">*</span><span class="st"> </span>pi) <span class="op">/</span><span class="st"> </span>(<span class="dv">180</span>) }</code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li><p>Write the result of your TOA conversion to disk in the <code>ENVI</code> format. Make sure to use an integer data type to save disk space.</p></li>
<li><p>Open the BOA and the TOA file in QGIS and visually assess the differences in the spectral signature between the SR and TOA files. Use the info tool´s graph view to investigate the spectral signatures of each of the following land cover types:</p></li>
</ol>
<ul>
<li>Deciduous forest</li>
<li>Coniferous forest</li>
<li>Grassland</li>
<li>Cropland</li>
<li>Impervious surfaces</li>
<li>Water</li>
</ul>
<ol style="list-style-type: lower-alpha">
<li>What are the most evident differences between TOA and SR reflectance spectra?</li>
<li>Briefly summarize the spectral appearance of the six land cover types, and the main difference between the TOA and SR.</li>
</ol>
<hr />
</div>
</div>
<div id="session-02-data-quality-cloud-masking" class="section level1">
<h1>Session 02: Data quality &amp; cloud masking</h1>
<div id="learning-goals-2" class="section level2">
<h2>Learning goals</h2>
<ul>
<li>Understand how to use the Landsat Collection 1 quality bands</li>
<li>Produce cloud / cloud shadow masks of differing confidence levels</li>
<li>Masking Landsat images</li>
</ul>
<p>Which issues affect data quality of optical satellite images?</p>
<p>next part of the exercise aims at a pixel-level description of image quality no need for dropping entire images, e.g. in case of high cloudiness, we can make use of parts of images, e.g. small unclouded regions BQA: Landsat quality band. what is it? definition: unsigned integers? bit-packed?</p>
<p>we get all that from image metadata… where do we find the metadata?</p>
<hr />
</div>
<div id="landsat-quality-bands" class="section level2">
<h2>Landsat quality bands</h2>
<p>How do we know if a pixel is affected by any of these?</p>
<div class="figure">
<img src="fig/s02_qa_band.png" alt="False-color representation of a cloudy Landsat Level 1 image (left) and a grey-scale visualization of the Landsat QA band (right)" style="width:60.0%" />
<p class="caption">False-color representation of a cloudy Landsat Level 1 image (left) and a grey-scale visualization of the Landsat QA band (right)</p>
</div>
<p>“Each pixel in the QA band contains unsigned integers that represent bit-packed combinations of surface, atmospheric, and sensor conditions that can affect the overall usefulness of a given pixel.”</p>
<div id="the-binary-system" class="section level3">
<h3>The binary system</h3>
<p>Remember the binary numeral system (0 / FALSE or 1 / TRUE)?</p>
<div class="figure">
<img src="fig/s02_binary_system.gif" alt="Binary system" style="width:100.0%" />
<p class="caption">Binary system</p>
</div>
<p>binary system represents numbers through 0/1 codes 0 means „FALSE“ or „NO“ and 1 equals „TRUE“ or „YES“ here, we have five bit positions, where each position is sequentially numbered, starting with 0, read from right to left we always calculate 2 to the power of the bit position… the combinations of 0 and 1 bits to the power of their position enables us to represent decimal numbers. the more positions the more / higher numbers we can generate</p>
<p>5 bits:</p>
<p>00001 = 0 * 24 + 0 * 23 + 0 * 22 + 0 * 21 + 1 * 20 = 1</p>
<p>00111 = 0 * 24 + 0 * 23 + 1 * 22 + 1 * 21 + 1 * 20 = 7</p>
<p>11111 = 1 * 24 + 1 * 23 + 1 * 22 + 1 * 21 + 1 * 20 = 31</p>
<p>5 bit: 0 – 31 = 32 values</p>
<p>16 bit: 0 - 65,535 = 65,536 values</p>
<p>the Landsat QA band is coded in 16 bits arranged from right to left: 0-15 each bit has a meaning in terms of data quality e.g. bit 4 (or position 5 from the right) means „cloud“ so if it´s 1, there´s a cloud. which integer value do we have when cloud is 1? 2^4 = 16 combinations of several true / false conditions result in different integer values</p>
<div class="figure">
<img src="fig/s02_landsat_qa.png" alt="Landsat QA band bit designation" style="width:80.0%" />
<p class="caption">Landsat QA band bit designation</p>
</div>
<p><a href="https://landsat.usgs.gov/collectionqualityband" class="uri">https://landsat.usgs.gov/collectionqualityband</a></p>
<p>For the single bits (0, 1, and 4):</p>
<p>0 = “No” = This condition does not exist 1 = “Yes” = This condition exists</p>
<p>For radiometric saturation bits (2-3), read from left to right, represent how many bands contain saturation:</p>
<p>00 - No bands contain saturation 01 - 1-2 bands contain saturation 10 - 3-4 bands contain saturation 11 - 5 or more bands contain saturation</p>
<p>The remaining double bits (5-6, 7-8, 9-10, 11-12, read from left to right) represent levels of confidence that a condition exists:</p>
<p>00 = “Not Determined” / This condition does not exist 01 = “Low” = Algorithm has low to no confidence that this condition exists (0-33 percent confidence) 10 = “Medium” = Algorithm has medium confidence that this condition exists (34-66 percent confidence) 11 = “High” = Algorithm has high confidence that this condition exists (67-100 percent confidence)</p>
<hr />
</div>
</div>
<div id="de-coding-quality-band-values" class="section level2">
<h2>De-coding quality band values</h2>
<p>Let´s look at the integer value 2804 to illustrate how this works. R offers a good way of dealing with bit-packed information. The <code>intToBits()</code> function converts integer numbers into sequences of bits, whereas 32 double-digit bits are returned by default.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Convert integer to bit sequence</span>
<span class="kw">intToBits</span>(<span class="dv">2804</span>)</code></pre></div>
<pre><code> [1] 00 00 01 00 01 01 01 01 00 01 00 01 00 00 00 00 00 00 00 00 00 00 00
[24] 00 00 00 00 00 00 00 00 00</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Convert the double-digit into single-digit bits</span>
<span class="kw">as.numeric</span>(<span class="kw">intToBits</span>(<span class="dv">2804</span>))</code></pre></div>
<pre><code> [1] 0 0 1 0 1 1 1 1 0 1 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># We´re looking at 16 bit data, so let´s deprecate the unused bits</span>
<span class="kw">as.numeric</span>(<span class="kw">intToBits</span>(<span class="dv">2804</span>)[<span class="dv">1</span><span class="op">:</span><span class="dv">16</span>])</code></pre></div>
<pre><code> [1] 0 0 1 0 1 1 1 1 0 1 0 1 0 0 0 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Bit sequences are read from right to left, so we need to reverse the order</span>
<span class="kw">rev</span>(<span class="kw">as.numeric</span>(<span class="kw">intToBits</span>(<span class="dv">2804</span>)[<span class="dv">1</span><span class="op">:</span><span class="dv">16</span>]))</code></pre></div>
<pre><code> [1] 0 0 0 0 1 0 1 0 1 1 1 1 0 1 0 0</code></pre>
<p>Now we can compare with the Landsat 8 Collection 1 Level 1 QA band bit designation. What´s the pixel quality information of the integer value 2804?</p>
<div class="figure">
<img src="fig/s02_landsat_qa_decode.PNG" alt="Landsat QA band bit designation" style="width:70.0%" />
<p class="caption">Landsat QA band bit designation</p>
</div>
<p>We are looking at a cloudy pixel with radiometric saturation affecting 1-2 bands.</p>
<hr />
</div>
<div id="exercise-1" class="section level2">
<h2>Exercise</h2>
<ol style="list-style-type: decimal">
<li><p>Let´s have a look at the Landsat Collection 1 Quality Band (BQA). First, load the BQA band and find the three most frequent values using <code>freq()</code>.</p></li>
<li><p>As you can see, the band contains integer values. By decoding the integer values into 16 bit binary strings, we can read the quality information for each pixel. Use the <code>intToBits()</code> function to decode the three most frequent BQA values and decipher their meaning using the Landsat quality band documentation. <code>intToBits()</code> returns 32 bits by default. Make sure you only look at bits 1 to 16. Also, keep in mind the right-to-left order when comparing the decoded bits with the table. You might want to use <code>rev()</code> to invert the order of the outputs by <code>intToBits()</code>. Note your findings as a comment in the script:</p></li>
</ol>
<pre><code># What do the most frequent values mean? Decode each integer value into bits and 
# describe their meaning here: 

# Most frequent value: 
# Second most frequent value: 
# Third most frequent value: </code></pre>
<ol start="4" style="list-style-type: decimal">
<li>By converting integer values into binary bits, we can extract specific attributes from the BQA. Let´s to this in a systematic manner by defining a function, which yields TRUE for binary codes with bit 0 = 1:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Define function to find fill values from Landsat BQA</span>
fill_pixels &lt;-<span class="st"> </span><span class="cf">function</span>(x) {<span class="kw">intToBits</span>(x)[<span class="dv">1</span>] <span class="op">==</span><span class="st"> </span>T}</code></pre></div>
<p>Next, use indexing and Boolean expressions to define functions which return TRUE for a) high confidence clouds, high confidence cloud shadows and fill values b) high and medium confidence clouds, high and medium confidence cloud shadows and fill values</p>
<ol start="5" style="list-style-type: decimal">
<li><p>Create a mask using the above functions. You can use <code>calc()</code>. Plot the mask and check if clouds, cloud shadows, and fill values are labeled as 1 and clear observations as 0. Write both masks to disk.</p></li>
<li><p>Open both masks in QGIS, together with an RGB representation of the image. Which mask is more accurate?</p></li>
<li><p>Next, load the BOA data as a stack (VIS, nIR, swIR) and use the mask() function to mask clouds, cloud shadows and fill values from the image. Use the mask which you found to be more accurate. Make sure to specify the maskvalue argument accordingly. Write the masked BOA stack to disk in the ENVI format.</p></li>
</ol>
</div>
<div id="reading-materials." class="section level2">
<h2>Reading materials.</h2>
<hr />
</div>
</div>
<div id="session-03-vegetation-indices-and-data-transforms" class="section level1">
<h1>Session 03: Vegetation indices and data transforms</h1>
<div id="learning-goals-3" class="section level2">
<h2>Learning goals</h2>
</div>
<div id="reading-materials.-1" class="section level2">
<h2>Reading materials.</h2>
<hr />
</div>
</div>
<div id="session-04-pixel-based-compositing" class="section level1">
<h1>Session 04: Pixel-based compositing</h1>
<div id="learning-goals-4" class="section level2">
<h2>Learning goals</h2>
</div>
<div id="reading-materials.-2" class="section level2">
<h2>Reading materials.</h2>
<hr />
</div>
</div>
<div id="session-05-machine-learning-for-image-classification" class="section level1">
<h1>Session 05: Machine learning for image classification</h1>
<div id="learning-goals-5" class="section level2">
<h2>Learning goals</h2>
</div>
<div id="reading-materials.-3" class="section level2">
<h2>Reading materials.</h2>
<hr />
</div>
</div>
<div id="session-06-accuracy-assessment-and-area-estimation" class="section level1">
<h1>Session 06: Accuracy assessment and area estimation</h1>
<div id="learning-goals-6" class="section level2">
<h2>Learning goals</h2>
</div>
<div id="reading-materials.-4" class="section level2">
<h2>Reading materials.</h2>
<hr />
</div>
</div>
<div id="session-07-multi-temporal-change-detection" class="section level1">
<h1>Session 07: Multi-temporal change detection</h1>
<div id="learning-goals-7" class="section level2">
<h2>Learning goals</h2>
</div>
<div id="reading-materials.-5" class="section level2">
<h2>Reading materials.</h2>
<hr />
</div>
</div>
<div id="session-08-spectral-temporal-metrics" class="section level1">
<h1>Session 08: Spectral-temporal metrics</h1>
<div id="learning-goals-8" class="section level2">
<h2>Learning goals</h2>
</div>
<div id="reading-materials.-6" class="section level2">
<h2>Reading materials.</h2>
<hr />
</div>
</div>
<div id="project-work" class="section level1">
<h1>Project work</h1>
<div id="phase-i" class="section level2">
<h2>Phase I</h2>
</div>
<div id="phase-ii" class="section level2">
<h2>Phase II</h2>
</div>
<div id="phase-iii" class="section level2">
<h2>Phase III</h2>
<hr />
</div>
</div>
<div id="terminology" class="section level1">
<h1>Terminology</h1>
<p>This is a non-exhaustive list of common terms and their definitions.</p>
<div id="observations" class="section level2">
<h2>Observations</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Pixel/">Pixel</a></li>
<li><p>Observation</p></li>
<li>Path/Row; WRS-2; Footprint; Scene: Partitions of Landsat images into approximately 185 × 185 km squares.</li>
<li>Grid: an arbitrary subdivision with square units in the target coordinate system.</li>
<li>Tile: an entity of the grid with a unique tile identifier.</li>
<li>Chip: the individual gridded images that are affiliated with the tile.</li>
<li><p>Scene, Image</p></li>
<li>Data cube, Stack</li>
<li>Time series</li>
<li>Archive</li>
<li><p>Collection, Tier, Processing level</p></li>
<li><p>DN, TOA, BOA</p></li>
</ul>
</div>
<div id="sensor-characteristics" class="section level2">
<h2>Sensor characteristics</h2>
<ul>
<li>Satellite</li>
<li>Sensor</li>
<li>Spatial resolution</li>
<li>Temporal resolution</li>
<li>Temporal coverage</li>
<li>Spectral resolution</li>
<li>Radiometric resolution</li>
</ul>
</div>
<div id="data-characteristics" class="section level2">
<h2>Data characteristics</h2>
<ul>
<li>Spectral band</li>
<li><p>Image quality</p></li>
<li>Very High Resolution</li>
<li>High Resolution</li>
<li>Medium Resolution</li>
<li>Moderate Resolution</li>
<li><p>Coarse Resolution</p></li>
<li>Time Series</li>
<li>Observation density</li>
<li>Multi-temporal</li>
<li><p>Hyper-temporal</p></li>
</ul>
</div>
<div id="higher-level-products" class="section level2">
<h2>Higher-level products</h2>
<ul>
<li>Composite / Mosaic</li>
<li>Pixel-based composites (Best observation composite)</li>
<li>Phenology-adaptive composites</li>
<li>Spectral-temporal metrics</li>
<li>Rank-band composite / metric</li>
<li>Phenometrics</li>
</ul>
</div>
<div id="time-intervals" class="section level2">
<h2>Time intervals</h2>
<ul>
<li>Multi-annual</li>
<li>Inter-annual</li>
<li>Annual</li>
<li>Intra-annual</li>
<li>Seasonal</li>
</ul>
</div>
</div>

    </div>
    <div class="col-xs-2">
        </div>
  </div>
  </div>
  </div>
  <div class="row">
    </div>
  </div>

<script>
$(document).ready(function () {
  // add bootstrap table styles to pandoc tables
  $('tr.header').parent('thead').parent('table').addClass('table table-striped table-hover');

    var images = $('.pages img');
  images.filter(function() {
      if ($(this).parent().attr("class") == "figure") {
          return(false)
      } else {
          return(true);
      }
  }).wrap("<div class='figure'></div>");
  images.addClass("image-thumb").wrap("<div class='panel-body'></div>");
  $('.figure p.caption').wrap("<div class='panel-footer'></div>");
  $('.figure').addClass('panel panel-default');
  
    $('.pages img')
 	  .addClass("image-lb");
  $('.pages').magnificPopup({
	      type:'image',
	      closeOnContentClick: false,
	      closeBtnInside: false,
        delegate: 'img',
	      gallery: {enabled: false },
          removalDelay: 500,
          callbacks: {
              beforeOpen: function() {
                // just a hack that adds mfp-anim class to markup
                this.st.image.markup = this.st.image.markup.replace('mfp-figure', 'mfp-figure mfp-with-anim');
              }
          },
          mainClass: 'mfp-move-from-top',
	      image: {
	        verticalFit: true,
            titleSrc: 'alt'
	      }
 	    });
 	
    
    $('#toc ul li').first().addClass("active");
    $('#toc ul li').attr("data-target", function() {
        return($(this).children("a").attr("href"));
    })
    $('body .section.level1').first().addClass("active");
    
    $('#toc a[href*="#"]').click(function() {

      var id = $(this).attr("href");
      if (id === "#") return;
      if (id.substring(0, 8) === "#dyntab-") return;
      toggle_page(id);

      // Menu
      var menu_entry = $(".menu li[data-target='"+id+"']");
      menu_entry.addClass("active");
      $(".menu li").not(menu_entry).removeClass("active"); 
      

    });

    function toggle_page(id) {
      $(".page").not(page).removeClass("active").hide();
      window.page = id;
      var page = $(window.page);
      window.location.hash = window.page;
      //$(this).addClass("active");

      page.show();

      var totop = setInterval(function () {
        $(".pages").animate({scrollTop: 0}, 0);
      }, 10);

      setTimeout(function () {
        page.addClass("active");
        setTimeout(function () {
          clearInterval(totop);
        }, 1000);
      }, 100);

      window.dispatchEvent(new Event('resize'));

    }


    $(".menu li").click(function () {

      toggle_page($(this).data("target"));

      // Menu
      if (!$(this).data("target")) return;
      if ($(this).is(".active")) return;
      $(".menu li").not($(this)).removeClass("active");
      $(this).addClass("active");

    });
  
    


    window.page = window.location.hash;
    if (window.page != "") {
      $(".menu").find("li[data-target=" + window.page + "]").trigger("click");
    }

    /* init material bootstrap js */
    $.material.init();
});
</script>




<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
